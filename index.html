<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>ƒ∞DT Repertuvar Sistemi v2</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #e9ded1; --card: #fbf7f1; --text: #16161a; --accent: #7a1e2c; --accent2: #c07a2a;
            --line: #dccbb7; --radius: 16px; --shadow: 0 10px 30px rgba(0,0,0,0.08);
        }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); margin: 0; padding-bottom: 80px; }
        
        /* Header & Nav */
        header { background: var(--card); padding: 1.2rem; border-bottom: 2px solid var(--accent); display: flex; justify-content: space-between; align-items: center; position: sticky; top:0; z-index:100; box-shadow: var(--shadow); }
        .brand { font-family: 'Playfair Display', serif; font-size: 1.4rem; color: var(--accent); }
        
        /* Dashboard Tools */
        .controls { padding: 1rem; display: flex; gap: 10px; flex-wrap: wrap; max-width: 1200px; margin: auto; }
        .search-box { flex: 1; min-width: 250px; padding: 12px 20px; border: 1px solid var(--line); border-radius: 30px; outline: none; background: var(--card); }
        
        /* Action Buttons */
        .btn { padding: 10px 20px; border-radius: 30px; border: none; cursor: pointer; font-weight: 600; display: flex; align-items: center; gap: 8px; transition: 0.2s; text-decoration: none; font-size: 0.9rem; }
        .btn-sheet { background: #1d6f42; color: white; } /* Google Sheets Ye≈üili */
        .btn-refresh { background: var(--accent); color: white; }

        /* KPI Cards */
        .kpi-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; padding: 0 1rem; max-width: 1200px; margin: auto; }
        .kpi { background: var(--card); padding: 1.5rem; border-radius: var(--radius); box-shadow: var(--shadow); border-left: 5px solid var(--accent); }
        .kpi small { color: #666; font-size: 0.8rem; text-transform: uppercase; }
        .kpi div { font-size: 1.8rem; font-weight: 700; margin-top: 5px; }

        /* Content Area */
        #mainContent { max-width: 1200px; margin: 2rem auto; padding: 0 1rem; }
        .view-section { display: none; animation: fadeIn 0.3s ease; }
        .view-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Veri Tablosu Stil */
        .data-table-wrapper { background: var(--card); border-radius: var(--radius); overflow: auto; box-shadow: var(--shadow); }
        table { width: 100%; border-collapse: collapse; white-space: nowrap; }
        th { background: rgba(122, 30, 44, 0.05); text-align: left; padding: 15px; border-bottom: 2px solid var(--line); color: var(--accent); }
        td { padding: 12px 15px; border-bottom: 1px solid var(--line); font-size: 0.9rem; }

        /* Bottom Tabbar */
        .tabbar { position: fixed; bottom: 0; left: 0; right: 0; background: var(--card); display: flex; justify-content: space-around; padding: 12px; border-top: 1px solid var(--line); box-shadow: 0 -5px 20px rgba(0,0,0,0.05); }
        .tab-item { background: none; border: none; color: #888; display: flex; flex-direction: column; align-items: center; gap: 5px; cursor: pointer; }
        .tab-item.active { color: var(--accent); }
        .tab-item span { font-size: 1.2rem; }
        .tab-item label { font-size: 0.7rem; font-weight: 600; }

        /* Status Indicator */
        #status { position: fixed; top: 80px; right: 20px; padding: 8px 16px; border-radius: 20px; font-size: 0.8rem; z-index: 1000; display: none; }
        .status-ok { background: #dcfce7; color: #166534; }

        @media (max-width: 768px) {
            .kpi-container { grid-template-columns: 1fr 1fr; }
        }
    </style>
</head>
<body>

<header>
    <div class="brand">ƒ∞DT <strong>Repertuvar</strong></div>
    <a id="sheetLink" href="#" target="_blank" class="btn btn-sheet">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-2h2v2zm0-4H7v-2h2v2zm0-4H7V7h2v2zm4 8h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2V7h2v2zm4 8h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2V7h2v2z"/></svg>
        <span>Sheet'i A√ß</span>
    </a>
</header>

<div id="status"></div>

<div class="controls">
    <input type="text" id="q" class="search-box" placeholder="Oyun veya ki≈üi ara...">
    <button id="refreshBtn" class="btn btn-refresh">üîÑ Yenile</button>
</div>

<div class="kpi-container">
    <div class="kpi" id="kpiOyunlar">
        <small>Toplam Oyun</small>
        <div id="countOyun">-</div>
    </div>
    <div class="kpi" id="kpiCakisma">
        <small>√áakƒ±≈üma</small>
        <div id="countCakisma" style="color:var(--accent)">-</div>
    </div>
</div>

<main id="mainContent">
    <section id="section-panel" class="view-section active">
        <div class="data-table-wrapper">
            <table id="mainTable">
                <thead id="mainHead"></thead>
                <tbody id="mainBody"></tbody>
            </table>
        </div>
    </section>

    <section id="section-analiz" class="view-section">
        <div id="cakismaContent"></div>
    </section>

    <section id="section-figuran" class="view-section">
        <div class="data-table-wrapper" id="figuranContent"></div>
    </section>
</main>

<nav class="tabbar">
    <button class="tab-item active" onclick="showTab('panel', this)"><span>üìã</span><label>PANEL</label></button>
    <button class="tab-item" onclick="showTab('analiz', this)"><span>‚ö†Ô∏è</span><label>ANALƒ∞Z</label></button>
    <button class="tab-item" onclick="showTab('figuran', this)"><span>üë•</span><label>Fƒ∞G√úRAN</label></button>
</nav>

<script src="app.js"></script>
</body>
</html>
